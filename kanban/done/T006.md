# T006: Relocate Status Chrome

**Status**: done
**Phase**: 0 of 7 (Timeline UI)
**Design Doc**: `doc/timeline-ui-plan.md`
**Depends on**: None (independent UI task)

## Goal

Move status bars and End Turn button to top-right chrome area (above combat log), freeing vertical space for timeline channels. Remove time bar. Refactor to reduce duplication.

## Context

Current layout has status bars (stamina, focus, time) and End Turn at bottom. Timeline UI needs that vertical space for 3 channel rows at card height. Status chrome moves to grey area above the RHS combat log.

## Tasks

### Layout Changes

- [x] 6.1 Move `StatusBarView` rendering to top-right area (above combat log)
- [x] 6.2 Remove time bar (no longer tracked/useful with explicit timeline positioning)
- [x] 6.3 Scale stamina and focus bars to fit in chrome width
- [x] 6.4 Move End Turn button to top-right chrome area

### Refactoring

- [x] 6.5 Audit `status_bar.zig` for duplication with other bar rendering
- [x] 6.6 Extract common bar rendering if beneficial
- [x] 6.7 Clean up any dead code from time bar removal

### Tests

- [x] 6.8 Visual verification: status bars visible in top-right
- [x] 6.9 End Turn button clickable in new position
- [x] 6.10 No regressions in stamina/focus display

## Acceptance Criteria

- Status bars (stamina, focus) render in top-right chrome
- Time bar removed entirely
- End Turn button in top-right chrome
- Code duplication reduced where practical
- Bottom area freed for future timeline use

## Key Files

```
src/presentation/views/chrome.zig             # Now contains status bars + EndTurn
src/presentation/views/combat/view.zig        # Main layout (removed status bar/EndTurn)
```

## Implementation Notes

Status bars and EndTurn were moved from combat/view.zig to chrome.zig because:
1. **Coordinate system**: Chrome uses screen coords; combat view uses viewport-relative coords (offset by header_h). The header area was inaccessible from combat view.
2. **Z-ordering**: Chrome renders before combat view. Status chrome belongs in the header layer.
3. **Conceptual clarity**: Status bars and EndTurn are UI chrome, not game viewport content.

Key changes:
- Created `ResourceBar` helper struct for reusable pip-bar rendering
- Created `StatusBars` struct that uses `ResourceBar` for stamina/focus
- Created `EndTurnButton` struct with hit testing using raw screen coords
- Deleted `status_bar.zig` and `button.zig` (consolidated into chrome.zig)
- Removed time bar entirely (field and rendering)

Positions (screen coords):
- Stamina bar: x=1430, y=10, w=200, h=30
- Focus bar: x=1640, y=10, w=200, h=30
- EndTurn: x=1430, y=50, w=120, h=40

---

**Created**: 2026-01-07
