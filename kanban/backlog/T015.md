# T015: Dud Card Definitions & Injection

**Status**: backlog
**Phase**: 4.6 of Increment 4
**Design Doc**: `doc/trauma_wounds_conditions_ph2.md` (Addendum: Dud Cards Mechanic)
**Depends on**: T012 (conditions), T014 (card mechanics)

## Goal

Define dud cards and wire condition gain to card injection.

## Dud Card Definitions

| Card | Injected By | Tags | Trigger | blocks_tags | Effect |
|------|-------------|------|---------|-------------|--------|
| `Wince` | `.distracted` | involuntary, status | - | - | Exhaust. Wastes action. |
| `Retch` | `.suffering` | involuntary, status | forced | - | Exhaust. Must play first. |
| `Stagger` | `.unsteady` | involuntary, status | - | - | Exhaust. Wastes action. |
| `Tremor` | `.trembling` | involuntary, status | while_in_hand | precision, finesse | Exhaust. Blocks precision/finesse while held. |
| `Blackout` | `.reeling` | involuntary, status | forced | - | Exhaust. Ends turn immediately. |

## Card Definitions

```zig
pub const wince = Card{
    .name = "Wince",
    .tags = &.{.involuntary, .status},
    .exhaust = true,
    .effects = &.{},  // does nothing when played
};

pub const retch = Card{
    .name = "Retch",
    .tags = &.{.involuntary, .status},
    .trigger = .forced,
    .exhaust = true,
    .effects = &.{},
};

pub const stagger = Card{
    .name = "Stagger",
    .tags = &.{.involuntary, .status},
    .exhaust = true,
    .effects = &.{},
};

pub const tremor = Card{
    .name = "Tremor",
    .tags = &.{.involuntary, .status},
    .trigger = .while_in_hand,
    .blocks_tags = &.{.precision, .finesse},
    .exhaust = true,
    .effects = &.{},
};

pub const blackout = Card{
    .name = "Blackout",
    .tags = &.{.involuntary, .status},
    .trigger = .forced,
    .exhaust = true,
    .effects = &.{.end_turn},  // or however turn-ending is modeled
};
```

## Injection Mechanism

Where conditions are added to agent:
```zig
fn addCondition(self: *Agent, condition: Condition, ...) void {
    // existing condition logic...

    // Inject dud card if applicable
    const dud = dudCardForCondition(condition);
    if (dud) |card| {
        self.hand.inject(card);
    }
}

fn dudCardForCondition(condition: Condition) ?*const Card {
    return switch (condition) {
        .distracted => &cards.wince,
        .suffering => &cards.retch,
        .unsteady => &cards.stagger,
        .trembling => &cards.tremor,
        .reeling => &cards.blackout,
        else => null,
    };
}
```

## Tests

- [ ] Gaining `.distracted` injects Wince into hand
- [ ] Gaining `.suffering` injects Retch (forced)
- [ ] Gaining `.trembling` injects Tremor; can't play `.precision` cards while held
- [ ] Playing Wince exhausts it (removed from game, not discard)
- [ ] Retch must be played before other cards
- [ ] Blackout ends turn when played
- [ ] Multiple condition gains = multiple dud cards

## Acceptance Criteria

- [ ] Build passes
- [ ] All tests pass
- [ ] Lint clean

## Notes

Dud cards should have distinct visual treatment in UI (greyed out? red border? skull icon?).

Consider: should `.agonized` also inject a card? Currently noâ€”it's the pain level just before incapacitation, maybe too severe for playing cards at all.

---

**Created**: 2026-01-08
