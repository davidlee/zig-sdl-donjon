# T007: Card Carousel Layout

**Status**: doing
**Phase**: 0 of 7 (Timeline UI)
**Design Doc**: `doc/timeline-ui-plan.md`
**Depends on**: None (independent UI task, can parallel T006)

## Goal

Replace current card rows (hand + known) with a single overlapping carousel at the bottom edge. Cards peek from bottom, fan out on hover.

## Context

Current layout shows hand cards and known cards (always-available techniques/manoeuvres) in separate full-height rows. This consumes too much vertical space. Card game convention: cards overlap in hand, peek from edge, fan to reveal on hover.

## Design

```
┌─────────────────────────────────────────────────────────────────┐
│  ... main combat area ...                                       │
├┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┤
│  ┌──┬──┬──┬──┐   ┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐          │
│  │  │  │  │Ha│ ~ │  │  │  │  │  │  │  │  │  │  │  │Kn│          │
└──┴──┴──┴──┴nd┴───┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴wn┴──────────┘
   ↑ cards overlap, peek from bottom edge
   ~ slight gap separating hand from known
```

**Hover behavior**: Mouse near bottom edge → cards fan up to reveal full set. Fan angle TBD (straight vertical or angled).

## Tasks

### Carousel Layout

- [ ] 7.1 Create carousel container component
  - Horizontal layout with overlap
  - Cards positioned with negative margin (or offset)
  - Two groups: hand (left) and known (right) with gap

- [ ] 7.2 Position carousel at bottom edge
  - Cards extend below visible area (peek)
  - Only top ~30-50% of card visible at rest

- [ ] 7.3 Group separation
  - Visual gap between hand and known sections
  - Possibly different background tint per group

### Fan-Out Interaction

- [ ] 7.4 Detect hover near bottom edge
  - Hover zone triggers fan animation
  - Not per-card hover, but region hover

- [ ] 7.5 Implement fan-out animation
  - Cards slide up and spread apart
  - Maintain grouping during fan
  - Smooth transition (ease-out)

- [ ] 7.6 Fan collapse on mouse leave
  - Return to overlapped/peeking state
  - Smooth transition

### Card Selection

- [ ] 7.7 Individual card hover (within fanned state)
  - Highlight hovered card
  - Show card details (existing tooltip behavior)

- [ ] 7.8 Card click/drag from carousel
  - Integrate with existing card selection
  - Support both click-to-play and drag-to-position

### Polish

- [ ] 7.9 Handle varying card counts gracefully
  - Few cards: less overlap, still centered
  - Many cards: more overlap, carousel scroll?

- [ ] 7.10 Visual distinction hand vs known
  - Border color, background, or label

## Open Questions

- Fan angle: straight up or angled like holding cards?
- Scroll/carousel if too many cards to fit?
- Animation timing values

## Acceptance Criteria

- Hand + known cards in single bottom-edge row
- Cards overlap and peek from bottom
- Hover near bottom fans cards up
- Click/drag still works for card selection
- Visual separation between hand and known groups

## Key Files

```
src/presentation/views/combat/view.zig       # Main layout
src/presentation/views/card/model.zig        # Card rendering
src/presentation/views/card/data.zig         # Card data
```

## Notes

This is a significant interaction change. Start with layout, then add hover detection, then animation. Can ship incremental improvements.

---

**Created**: 2026-01-07
